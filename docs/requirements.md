# 要件定義書 - ShopScraper

## 1. プロジェクト概要

### 1.1 プロジェクト名
ShopScraper - 商品管理システム

### 1.2 目的
オンラインショップの商品情報を効率的に管理し、Amazon販売における利益計算を自動化するシステム

### 1.3 背景
- 複数のオンラインショップから商品情報を手動で収集する作業の効率化
- Amazon販売時の利益計算の自動化
- 商品価格の変動監視とセール情報の把握

## 2. 機能要件

### 2.1 商品情報スクレイピング機能
- **FR-001**: DHC公式サイトから商品情報を自動取得
- **FR-002**: VT Cosmetics公式サイトから商品情報を自動取得
- **FR-003**: 商品名、価格、セール価格、画像URLの取得
- **FR-004**: スクレイピング結果の自動保存

### 2.2 商品管理機能
- **FR-005**: 商品一覧の表示
- **FR-006**: 商品情報の検索・フィルタリング
- **FR-007**: 商品の非表示設定
- **FR-008**: 商品情報の手動更新

### 2.3 ASIN管理機能
- **FR-009**: 商品へのASIN情報の紐付け
- **FR-010**: ASIN情報の一括アップロード（Excel/CSV）
- **FR-011**: Amazon商品情報の自動取得
- **FR-012**: 販売手数料・FBA手数料の管理

### 2.4 利益計算機能
- **FR-013**: Amazon販売価格と仕入価格の比較
- **FR-014**: 利益額の自動計算
- **FR-015**: 利益率の自動計算
- **FR-016**: ROI（投資収益率）の自動計算

### 2.5 ダッシュボード機能
- **FR-017**: 総商品数の表示
- **FR-018**: アクティブショップ数の表示
- **FR-019**: 最終更新日時の表示
- **FR-020**: セール商品数の表示
- **FR-021**: 商品数推移グラフの表示
- **FR-022**: 最新アクティビティの表示

## 3. 非機能要件

### 3.1 性能要件
- **NFR-001**: スクレイピング処理は10分以内に完了すること
- **NFR-002**: 商品一覧の表示は3秒以内に完了すること
- **NFR-003**: 同時に100商品まで処理可能であること

### 3.2 可用性要件
- **NFR-004**: システムの稼働率は99%以上であること
- **NFR-005**: スクレイピングエラー時は適切なエラーメッセージを表示すること

### 3.3 セキュリティ要件
- **NFR-006**: プロキシサーバーを使用したスクレイピング
- **NFR-007**: APIエンドポイントの適切なエラーハンドリング

### 3.4 保守性要件
- **NFR-008**: 新しいショップの追加が容易であること
- **NFR-009**: コードの可読性と保守性を保つこと

## 4. システム制約

### 4.1 技術制約
- **CON-001**: Next.js 14を使用
- **CON-002**: TypeScriptを使用
- **CON-003**: Tailwind CSSを使用
- **CON-004**: Puppeteerを使用したスクレイピング

### 4.2 運用制約
- **CON-005**: WebContainerでの動作
- **CON-006**: ファイルベースのデータ保存

## 5. ユーザー要件

### 5.1 対象ユーザー
- Amazon販売事業者
- 商品仕入れ担当者
- 価格監視担当者

### 5.2 ユーザーシナリオ
1. **商品情報収集**: 定期的にショップサイトから最新の商品情報を取得
2. **ASIN登録**: 取得した商品にAmazon ASINを紐付け
3. **利益計算**: 仕入価格とAmazon販売価格から利益を計算
4. **商品管理**: 利益率の高い商品を特定し、仕入れ判断を行う

## 6. データ要件

### 6.1 商品データ
- 商品名（必須）
- 価格（必須）
- セール価格（任意）
- 画像URL（任意）
- 更新日時（必須）
- 非表示フラグ（任意）

### 6.2 ASINデータ
- ASIN（必須）
- Amazon商品名（必須）
- Amazon販売価格（必須）
- 月間販売個数（任意）
- 販売手数料率（必須）
- FBA手数料（必須）
- JANコード（任意）

## 7. インターフェース要件

### 7.1 ユーザーインターフェース
- レスポンシブデザイン対応
- ダークテーマ
- 直感的な操作性

### 7.2 外部インターフェース
- DHC公式サイト
- VT Cosmetics公式サイト
- プロキシサーバー

## 8. 品質要件

### 8.1 信頼性
- データの整合性保証
- エラー時の適切な復旧

### 8.2 使いやすさ
- 直感的なUI/UX
- 適切なフィードバック表示

### 8.3 効率性
- 高速なデータ処理
- メモリ使用量の最適化